{"version":3,"sources":["../src/app.js"],"names":["process","env","ENV","config","global","promise","Promise","console","log","all","connect","mongoUri","init","then","app","use","req","res","send","catch","e","resolve"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAG,CAACA,QAAQC,GAAR,CAAYC,GAAhB,EAAqB;AACpB,mBAAOC;;AAER;;AAFC,KAIDC,OAAOC,OAAP,GAAiBC,OAAjB;;AAGA,IAAGN,QAAQC,GAAR,CAAYC,GAAZ,KAAoB,aAAvB,EAAqC;AACnC,mBAAOC,MAAP;AACDI,UAAQC,GAAR,cAAuBR,QAAQC,GAAR,CAAYC,GAAnC;;AAEA;AACA;AACA;AACA;AALA;AAMA;;AAEDI,QAAQG,GAAR,CAAY,CACX,mBAASC,OAAT,CAAiBV,QAAQC,GAAR,CAAYU,QAA7B,CADW,EAEV,kBAAIC,IAAJ,EAFU,EAGV,mBAASA,IAAT,EAHU,CAAZ,EAIGC,IAJH,CAIQ,YAAI;;AAEXN,UAAQC,GAAR;;AAEC,oBAAIM,GAAJ,CAAQC,GAAR,CAAY,UAAZ;;AAIA,oBAAID,GAAJ,CAAQC,GAAR,CAAY,GAAZ,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAY;AAC3BA,QAAIC,IAAJ,CAAS,mBAAT;AACD,GAFD;AAMD,CAlBD,EAkBGC,KAlBH,CAkBS,UAACC,CAAD,EAAK;AACbb,UAAQC,GAAR,mCAA4CY,CAA5C;AACC,SAAOC,SAAP;AACD;;AAED;;;AAvBA","file":"app.js","sourcesContent":["import database from './config/database'\r\nimport app from './config/express'\r\nimport dotenv from 'dotenv'\r\nimport sendgrid from './config/sendgrid'\r\nimport exampleRouter from './routers/example'\r\n\r\nif(!process.env.ENV) // make sure we have env params\r\n\tdotenv.config()\r\n\r\n// init dotenv for development\r\n\r\nglobal.promise = Promise\r\n\r\n\r\nif(process.env.ENV === \"development\"){\r\n  dotenv.config()\r\n\tconsole.log(`\\n\\n=== ${process.env.ENV} ===\\n`)\r\n\r\n\t// prints mongoose errors //\r\n\t// mongoose.set('debug', (collectionName, method, query, doc) => {\r\n\t// \tdebug(`${collectionName}.${method}`, util.inspect(query, false, 20), doc)\r\n\t// })\r\n}\r\n\r\nPromise.all([\r\n\tdatabase.connect(process.env.mongoUri),\r\n \tapp.init(),\r\n  sendgrid.init()\r\n]).then(()=>{\r\n\r\n\tconsole.log(`\\n=== Init finished ===\\n`)\r\n\r\n  app.app.use(\"/example\", exampleRouter)\r\n\r\n\r\n\r\n  app.app.use(\"/\", (req, res)=>{\r\n    res.send(\"server is running\")\r\n  })\r\n\r\n\r\n\r\n}).catch((e)=>{\r\n\tconsole.log(`errors in running server: \\n ${e}`)\r\n  return resolve()\r\n})\r\n\r\n/*\r\n      <a href=\"https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_ByD3ILYKPapACHNkggMyRusOnbODcDjC&scope=read_write&state=5a37395bb208f41d7fcb5c96\">\r\n */"]}